# Лабораторная работа №2 (обычная)
Что надо сделать:
1. Написать “плохой” Dockerfile, в котором есть не менее трех “bad practices” по написанию докерфайлов
2. Написать “хороший” Dockerfile, в котором эти плохие практики исправлены
3. В Readme описать каждую из плохих практик в плохом докерфайле, почему она плохая и как в хорошем она была исправлена, как исправление повлияло на результат
4. В Readme описать 2 плохих практики по работе с контейнерами. ! Не по написанию докерфайлов, а о том, как даже используя хороший докерфайл можно накосячить именно в работе с контейнерами.


## "Плохой" Dockerfile:
С помощью команды nano создаем и открываем файл bad Dockerfile в текстовом редакторе терминала. Далее пишим "плохой" Dockerfile, показанный на картинке ниже.

![Image alt](https://github.com/lisalaktionova/itmo_devops-clouds/blob/main/DevOps/Laba_2/bad.png)

Какие 'bad practices' есть в этом Dockerfile:
1. **Использование latest тега**

     Это небезопасно, так как версия образа может обновиться и сломать совместимость окружения.

2. **Установки пакетов в отдельных слоях**

     Каждый слой в Docker добавляет новый слой к образу, и установка пакетов в нескольких слоях приводит к тому, что каждый слой занимает лишнее место.

3. **Установка пакетов без указания зависимостей**

     Установка пакетов без указания точных зависимостей в requirements.txt усложняет поддержку и контроль версий библиотек.
   
  
## "Хороший" Dockerfile:
В хорошем Dockerfile были исправлены все плохие практики.

![Image alt](https://github.com/lisalaktionova/itmo_devops-clouds/blob/main/DevOps/Laba_2/good.png)

1. **Использование latest тега**
   
     В "хорошем" Dockerfile мы используем конкретную версию (`python:3.9`), что гарантирует стабильность. Использование более актуальных образов позволяет избежать уязвимостей, которые могли быть устранены в более новых версиях.

2. **Установки пакетов в отдельных слоях**
   
     Используем официальный Python образа, который включает необходимые зависимости и исключает ненужные утилиты. Также образ не требует установки Python вручную, что сокращает время сборки контейнера.
   
3. **Установка пакетов без указания зависимостей**
   
     Добавляем requirements.txt (файл для указания зависимостей, то есть сторонних библиотек и пакетов) с явным указанием необходимых библиотек и использование команды pip install --no-cache-dir для минимизации размера образа. Теперь процесс установки зависимостей легко воспроизводи и  размер образа минимален.
     

## Плохие практики при работе с контейнерами:

1. **Запуск контейнера с root-привилегиями**

     Запуск контейнеров с правами root может привести к уязвимостям безопасности, поскольку если контейнер будет взломан, злоумышленник может получить доступ к хостовой системе.

2. **Запуск нескольких сервисов в одном контейнере**
   
     Это нарушает принцип контейнеризации "один контейнер — один процесс". Лучше разделять сервисы на отдельные контейнеры для управления и изоляции.
